---
phase: 01-foundation-tech-stack
plan: 02
type: execute
wave: 2
depends_on: ["01-01"]
files_modified: [src/content/config.ts, src/content/blog/, src/content/projects/]
autonomous: true
---

<objective>
Configure type-safe Content Collections for blog posts and projects.

Purpose: Set up Astro 5.0 Content Layer API with Zod schemas for build-time validation, ensuring frontmatter errors are caught during development instead of in production.
Output: Content Collections configured with schemas for blog and projects, sample content migrated, type safety working.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-foundation-tech-stack/01-RESEARCH.md
@.planning/phases/01-foundation-tech-stack/01-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Content Collections configuration with schemas</name>
  <files>src/content/config.ts</files>
  <action>Create src/content/config.ts with type-safe schemas for blog and projects collections using Astro 5.0 Content Layer API. Use glob loader (not filesystem loader) per research recommendations.

Blog schema should include: title (string), description (string), publishDate (coerce.date), updatedDate (optional coerce.date), tags (array of strings, default empty), draft (boolean, default false).

Projects schema should include: title (string), description (string), problem (string), solution (string), demoUrl (optional string URL), githubUrl (optional string URL), completedDate (coerce.date).

Implementation:
```typescript
import { defineCollection, z } from 'astro:content';
import { glob } from 'astro/loaders';

const blog = defineCollection({
  loader: glob({ pattern: '**/*.{md,mdx}', base: './src/content/blog' }),
  schema: z.object({
    title: z.string(),
    description: z.string(),
    publishDate: z.coerce.date(),
    updatedDate: z.coerce.date().optional(),
    tags: z.array(z.string()).default([]),
    draft: z.boolean().default(false),
  }),
});

const projects = defineCollection({
  loader: glob({ pattern: '**/*.{md,mdx}', base: './src/content/projects' }),
  schema: z.object({
    title: z.string(),
    description: z.string(),
    problem: z.string(),
    solution: z.string(),
    demoUrl: z.string().url().optional(),
    githubUrl: z.string().url().optional(),
    completedDate: z.coerce.date(),
  }),
});

export const collections = { blog, projects };
```

Do NOT add heroImage or other fields not in the schema above. Follow research guidance exactly.</action>
  <verify>Run `cat src/content/config.ts` to confirm schema definitions match specification</verify>
  <done>src/content/config.ts created with blog and projects collections, Zod schemas defined per specification, glob loaders configured</done>
</task>

<task type="auto">
  <name>Task 2: Create projects content directory with sample project</name>
  <files>src/content/projects/, src/content/projects/example-project.md</files>
  <action>Create src/content/projects/ directory and add one sample project markdown file (example-project.md) that matches the projects schema.

Sample content structure:
```markdown
---
title: "Example Project"
description: "A sample project showcasing the narrative format"
problem: "Needed a clear way to showcase project work with focus on problem-solving narrative"
solution: "Built a portfolio section emphasizing what problems were solved, why the project matters, and what was learned"
demoUrl: "https://example.com/demo"
githubUrl: "https://github.com/example/project"
completedDate: 2026-01-01
---

# Example Project

This is a sample project demonstrating the narrative-focused format for project showcases.

## The Problem

[Description of what problem this project solved]

## The Solution

[Description of the approach and implementation]

## What I Learned

[Key takeaways and insights from building this]
```

This demonstrates the project content format for future project additions.</action>
  <verify>Run `ls -la src/content/projects/` to confirm directory and example-project.md exist</verify>
  <done>src/content/projects/ directory created, example-project.md added with valid frontmatter matching projects schema</done>
</task>

<task type="auto">
  <name>Task 3: Verify Content Collections build and TypeScript types generate</name>
  <files>None (verification only)</files>
  <action>Run `npm run build` to verify Content Collections schemas are valid and TypeScript types generate correctly. Astro will automatically generate .astro/ directory with collection types. If build fails with schema errors, debug and fix frontmatter issues in sample posts. The blog template's sample posts should already match common schema patterns, but verify publishDate format is compatible with z.coerce.date().</action>
  <verify>Run `npm run build` succeeds, check that .astro/types.d.ts exists with ContentCollectionMap types for blog and projects</verify>
  <done>Content Collections build successfully, TypeScript types generated in .astro/ directory, no schema validation errors, both blog and projects collections recognized</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without schema validation errors
- [ ] .astro/types.d.ts exists with blog and projects collection types
- [ ] src/content/blog/ has sample posts with valid frontmatter
- [ ] src/content/projects/ has example-project.md with valid frontmatter
- [ ] TypeScript editor autocomplete works for getCollection('blog') and getCollection('projects')
</verification>

<success_criteria>

- All tasks completed
- Content Collections configured with type-safe schemas
- Both blog and projects collections working
- Build passes with no validation errors
- TypeScript types generated and functional
  </success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-tech-stack/01-02-SUMMARY.md`
</output>
